<!DOCTYPE html>
<html lang="en" ng-app>
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

{{1+1}}




<script src="js/angular.min.js"></script>
<script>

    var modules = JSON.parse(localStorage.getItem('modules')) || [];

    angular.module = function(a,b) {
        if (b === undefined) {
            for (var i = 0; i < modules.length; i++) {
                for (var prop in modules[i]) {
                    if (modules[i][prop] === a) {
                        alert(a);
                        break;
                    }
                    //the problem is here, when we have an empty array, this statement is not reached
                    else {
                        alert('this module does not exist, please create it first')
                    }
                }
            }
        }
        else {
            for (var i = 0; i < modules.length; i++) {
                for (var prop in modules[i]) {
                    if (modules[i][prop] === a) {
                        alert('this module already exists, call it or create one with different name');
                        break;
                    }
                    //the problem is here, when we have an empty array, this statement is not reached
                    else {
                        modules.push({moduleName: a, moduleDependencies: b});
                        localStorage.setItem('modules', JSON.stringify(modules));
                    }
                }
            }
        }
    };

    angular.module('module2',[])


</script>
</body>
</html>


